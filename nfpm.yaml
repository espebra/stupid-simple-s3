name: stupid-simple-s3
arch: ${ARCH}
platform: linux
version: ${VERSION}
maintainer: Espen Braastad
description: A minimal S3-compatible object storage service
vendor: espebra
homepage: https://github.com/espebra/stupid-simple-s3
license: BSD-2-Clause

contents:
  - src: ./bin/stupid-simple-s3-linux-${ARCH}
    dst: /usr/bin/stupid-simple-s3

  - src: ./packaging/stupid-simple-s3.service
    dst: /lib/systemd/system/stupid-simple-s3.service

  - src: ./packaging/environment
    dst: /etc/stupid-simple-s3/environment
    type: config|noreplace

  - dst: /var/lib/stupid-simple-s3/data
    type: dir
    file_info:
      owner: stupid
      group: stupid
      mode: 0750

  - dst: /var/lib/stupid-simple-s3/tmp
    type: dir
    file_info:
      owner: stupid
      group: stupid
      mode: 0750

scripts:
  postinstall: ./packaging/postinstall.sh

overrides:
  deb:
    depends:
      - systemd
  rpm:
    depends:
      - systemd
